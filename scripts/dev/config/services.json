{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Development Services Configuration",
  "description": "定義: Docker/ネイティブ実行可能な全サービス（Laravel API、Next.js Apps、インフラサービス）",
  "services": {
    "laravel-api": {
      "name": "Laravel API",
      "type": "api",
      "mode": "docker|native",
      "port": 13000,
      "healthCheck": "http://localhost:13000/api/health",
      "docker": {
        "service": "laravel-api",
        "profile": "api"
      },
      "native": {
        "command": "cd backend/laravel-api && php artisan serve --host=0.0.0.0 --port=13000",
        "env": {
          "APP_PORT": "13000"
        }
      },
      "dependencies": ["pgsql", "redis", "mailpit", "minio"]
    },
    "admin-app": {
      "name": "Admin App",
      "type": "frontend",
      "mode": "docker|native",
      "port": 13002,
      "healthCheck": "http://localhost:13002",
      "docker": {
        "service": "admin-app",
        "profile": "frontend"
      },
      "native": {
        "command": "cd frontend/admin-app && npm run dev -- --port 13002",
        "env": {
          "PORT": "13002",
          "NEXT_PUBLIC_API_URL": "http://localhost:13000"
        }
      },
      "dependencies": ["laravel-api"]
    },
    "user-app": {
      "name": "User App",
      "type": "frontend",
      "mode": "docker|native",
      "port": 13001,
      "healthCheck": "http://localhost:13001",
      "docker": {
        "service": "user-app",
        "profile": "frontend"
      },
      "native": {
        "command": "cd frontend/user-app && npm run dev -- --port 13001",
        "env": {
          "PORT": "13001",
          "NEXT_PUBLIC_API_URL": "http://localhost:13000"
        }
      },
      "dependencies": ["laravel-api"]
    },
    "pgsql": {
      "name": "PostgreSQL",
      "type": "infra",
      "mode": "docker",
      "port": 13432,
      "healthCheck": "pg_isready",
      "docker": {
        "service": "pgsql",
        "profile": "infra"
      }
    },
    "redis": {
      "name": "Redis",
      "type": "infra",
      "mode": "docker",
      "port": 13379,
      "healthCheck": "redis-cli ping",
      "docker": {
        "service": "redis",
        "profile": "infra"
      }
    },
    "mailpit": {
      "name": "Mailpit",
      "type": "infra",
      "mode": "docker",
      "port": 11025,
      "dashboardPort": 13025,
      "healthCheck": null,
      "docker": {
        "service": "mailpit",
        "profile": "infra"
      }
    },
    "minio": {
      "name": "MinIO",
      "type": "infra",
      "mode": "docker",
      "port": 13900,
      "consolePort": 13010,
      "healthCheck": "mc ready local",
      "docker": {
        "service": "minio",
        "profile": "infra"
      }
    }
  }
}
